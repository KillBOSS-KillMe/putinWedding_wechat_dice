<template>
  <view>
    <view class="address">
      <view>
        <icon class="iconfont icondingwei"></icon>
        <text>西安</text>
      </view>
      <icon class="iconfont iconkefu"></icon>
    </view>
    <swiper wx:if="{{swiperList.length > 0}}" class='swiper' indicator-dots="true" autoplay='true' interval='5000' duration='2000'>
      <repeat for="{{swiperList}}" item="item">
        <swiper-item data-id="{{ item.id }}">
          <image src="{{ item.image_url }}" bindtap='shareQRCodeImg' data-imgurl="{{requestImgUrl + item.image_url}}" />
        </swiper-item>
      </repeat>
    </swiper>
    <view class="pageNav">
      <repeat for="{{pageNav}}" item="item">
        <view class="item" data-id="{{item.id}}" @tap="pageNavClick">
          <image src="{{item.img}}" />
          <text>{{item.name}}</text>
        </view>
      </repeat>
    </view>
    <view class="VIP">
      <image src="../image/vip.png" />
    </view>
    <view class="listCon">
      <view class="listTile">
        <text class="name">服务推荐</text>
        <view>
          更多
          <icon class="iconfont icondingwei"></icon>
        </view>
      </view>
      <view class="list">
        <repeat for="{{serviceList}}" item="item">
          <view class="item" data-id="{{item.id}}">
            <image src="{{item.image_url}}" />
            <view class="name">{{item.name}}</view>
            <view class="price">
              ￥{{item.price}}
              <text>起</text>
            </view>
          </view>
        </repeat>
      </view>
    </view>
    <view class="listCon">
      <view class="listTile">
        <text class="name">服务推荐</text>
        <view>
          更多
          <icon class="iconfont icondingwei"></icon>
        </view>
      </view>
      <view class="list">
        <repeat for="{{peopleList}}" item="item">
          <view class="item" data-id="{{item.id}}">
            <image src="{{item.image_url}}" />
            <view class="name">{{item.name}}</view>
            <view class="price">
              ￥{{item.price}}
              <text>起</text>
            </view>
          </view>
        </repeat>
      </view>
    </view>
    <view class="maskCon" wx:if="{{maskShow}}">
      <view class="mask" @tap="newItem"></view>
      <view class="showCon">
        <view class="name">为了方便您使用此产品，点击</view>
        <view class="name">右上角按钮，选择“添加到桌面”</view>
      </view>
    </view>
    
    <nav @childFn.user="goPage" @childFnOrReturn.user="goModifyUserInfo" />
  </view>
</template>

<script>
  import wepy from 'wepy'
  import nav from '../components/nav' // 底部导航
  export default class Index extends wepy.page {
    config = {
      navigationBarTitleText: '普京婚庆'
    }
    components = {
      nav: nav
    }

    mixins = []

    data = {
      swiperList: [
        {image_url: '../image/daw.jpg'},
        {image_url: '../image/daw.jpg'},
        {image_url: '../image/daw.jpg'},
        {image_url: '../image/daw.jpg'}
      ],
      pageNav: [
        {id: '1', name: '全部商家', img: '../image/allMerchant.png' },
        {id: '2', name: '抢单', img: '../image/grabOrder.png' },
        {id: '3', name: '服务', img: '../image/service.png' },
        {id: '4', name: '同行互换', img: '../image/exchange.png' }
      ],
      serviceList: [
        {id: '1', name: '奔驰E级', price: '30000', image_url: '../image/daw.jpg'},
        {id: '1', name: '奔驰E级', price: '30000', image_url: '../image/daw.jpg'},
        {id: '1', name: '奔驰E级', price: '30000', image_url: '../image/daw.jpg'},
        {id: '1', name: '奔驰E级', price: '30000', image_url: '../image/daw.jpg'},
        {id: '1', name: '奔驰E级', price: '30000', image_url: '../image/daw.jpg'},
        {id: '1', name: '奔驰E级', price: '30000', image_url: '../image/daw.jpg'},
        {id: '1', name: '奔驰E级', price: '30000', image_url: '../image/daw.jpg'},
      ],
      peopleList: [
        {id: '1', name: '奔驰E级', price: '30000', image_url: '../image/daw.jpg'},
        {id: '1', name: '奔驰E级', price: '30000', image_url: '../image/daw.jpg'},
        {id: '1', name: '奔驰E级', price: '30000', image_url: '../image/daw.jpg'},
        {id: '1', name: '奔驰E级', price: '30000', image_url: '../image/daw.jpg'},
        {id: '1', name: '奔驰E级', price: '30000', image_url: '../image/daw.jpg'},
        {id: '1', name: '奔驰E级', price: '30000', image_url: '../image/daw.jpg'},
        {id: '1', name: '奔驰E级', price: '30000', image_url: '../image/daw.jpg'},
      ],
      maskShow: false,
      userInfo: null,
      cityNode: [],
      searchList: []
    }

    computed = {

    }

    methods = {
      // 底部导航跳转
      // 底部导航跳转
      goPage (url, evt) {
        // if (this.verificationUserInfo()) {
        //   return 
        // }
        // 销毁当前页{跳转}
        this.$redirect(url)
      },
      // 页面中部导航点击事件
      pageNavClick(e) {
        let id = e.currentTarget.dataset.id
      },
      // 弹框显示
      newItem() {
        if (this.maskShow) {
          this.maskShow = false
        } else {
          this.maskShow = true
        }
        this.$apply()
      },
      
    }

    events = {

    }

    onLoad() {
      
    }
    

    // 用户信息校验
    verificationUserInfo() {
      if (!this.userInfo.hasOwnProperty('id')) {
        wx.showToast({
          title: "用户信息加载中...",
          icon: 'none',
        });
        return true
      }
    }
  }
</script>
<style lang="less">
  .address{
    width: 690rpx;
    height: auto;
    padding: 20rpx 30rpx;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-top: 1rpx solid #EEEEEE;
    view{
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 32rpx;
      font-weight: 600;
      color: #1F1F1F;
      .iconfont{
        font-size: 32rpx;
      }
    }
    text{
      padding-left: 10rpx;
    }
    .iconfont{
      display: flex;
      align-items: center;
      justify-content: center;
      color: #999999;
      font-size: 48rpx;
    }
  }
  .swiper {
    width: 690rpx;
    height: 315rpx;
    padding: 0rpx 30rpx;
    border-radius: 20rpx;
    overflow: hidden;
    image {
      width: 100%;
      height: 100%;
      border-radius: 10rpx;
    }
  }
  .pageNav{
    width: 690rpx;
    height: auto;
    padding: 20rpx 30rpx;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-direction: row;
    flex-wrap: wrap;
    .item{
      width: 25%;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      flex-direction: column;
      font-size: 26rpx;
      color: #494949;
    }
    image{
      width: 106rpx;
      height: 106rpx;
    }
  }
  .VIP{
    width: 690rpx;
    height: auto;
    padding: 0 30rpx;
    border-top: 10rpx solid #F8F8F8;
    image{
      width: 690rpx;
      height: 236rpx;
    }
  }
  .listCon{
    width: 690rpx;
    height: auto;
    padding: 0 30rpx;
    border-top: 10rpx solid #F8F8F8;
    .listTile{
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 26rpx;
      color: #999999;
      padding: 20rpx 0;
      .name{
        font-size: 32rpx;
        font-weight: 600;
        color: #1F1F1F;
      }
      view{
        display: flex;
        align-items: center;
        justify-content: center;
      }
      icon{
        width: 28rpx;
        width: 28rpx;
        font-size: 28rpx;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #999999
      }
    }
    .list{
      width: 690rpx;
      height: auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-direction: row;
      flex-wrap: wrap;
    }
    .item{
      width: 222rpx;
      height: 350rpx;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      flex-direction: column;
      border-radius: 10rpx;
      margin: 10rpx 0;
      background-color: #F5F5F5;
      .name{
        font-size: 30rpx;
        font-weight: 600;
        color: #1F1F1F;
        padding: 15rpx 0;
      }
    }
    image{
      width: 222rpx;
      height: 230rpx;
      border-radius: 10rpx 10rpx 0 0;
    }
    .price{
      font-size: 22rpx;
      font-weight: 600;
      color: #F42652;
      text{
        font-size: 20rpx;
        font-weight: 500;
        color: #999999;
      }
    }
  }
  .listCon:last-of-type{
    margin-bottom: 130rpx
  }
  .maskCon .showCon{
    width: 580rpx;
    height: 445rpx;
    justify-content: center;
  }
</style>