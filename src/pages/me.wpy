<template>
  <view class="me">
    <image class="meBj" src='../image/meBj.png'>
    <view class="header">
      <view class="headLift" wx:if="{{userInfo.phone == ''}}">
        <image src='{{userInfo.avatarUrl}}'>
        <view>
          <view>
            <text class="name">{{userInfo.nickName}}</text>
            <text class="userId">ID：{{userInfo.phone}}</text>
          </view>
          <text class="fontInfo">登录后获取更多服务信息</text>
        </view>
      </view>
      <view class="headLift" wx:if="{{userInfo.phone != ''}}">
        <image src='{{userInfo.avatarUrl}}'>
        <view>
          <view>
            <text class="name">{{userInfo.nickName}}</text>
            <text class="userId">ID：{{userInfo.phone}}</text>
          </view>
        </view>
      </view>
      <image @tap="setting" class="seting" src='../image/seting.png'>
    </view>
    <view class="mony">
      <view @tap='meBalance'>
        <text class="monyText">222</text>
        <text>余额/提现</text>
      </view>
      <view @tap='meCashBack'>
        <text class="monyText">222</text>
        <text>分销返佣</text>
      </view>
      <view @tap='meSubordinate'>
        <text class="monyText">222</text>
        <text>我的下级</text>
      </view>
    </view>
    <view class="meOrder">
      <text class="meOrderTitle">订单</text>
      <view class="meOrderMore">
        查看全部订单
        <icon class="iconfont iconjiantou"></icon>
      </view>
    </view>
    <view class="mony">
      <view class="meOrderItem" @tap='meXy' data-id='1'>
        <image src='../image/meXy.png'>
        <text>发布的需要</text>
      </view>
      <view class="meOrderItem" @tap='meXy' data-id='2'>
        <image src='../image/meTg.png'>
        <text>发布的提供</text>
      </view>
      <view class="meOrderItem" @tap='meXy' data-id='3'>
        <image src='../image/meHh.png'>
        <text>发布的互换</text>
      </view>
      <view class="meOrderItem" @tap='meXy' data-id='4'>
        <image src='../image/meXyB.png'>
        <text>接受的需求</text>
      </view>
      <view class="meOrderItem" @tap='meXy' data-id='5'>
        <image src='../image/meTgB.png'>
        <text>接受的服务</text>
      </view>
      <view class="meOrderItem" @tap='meXy' data-id='6'>
        <image src='../image/meHhj.png'>
        <text>接受的互换</text>
      </view>
    </view>
    <view class="meList">
      <view class="meListItem">
        <view>
          <image src='../image/meKf.png'>
          <text>专属客服</text>
        </view>
        <icon class="iconfont iconjiantou"></icon>
      </view>
      <view class="meListItem">
        <view>
          <image src='../image/meZxzx.png'>
          <text>在线咨询</text>
        </view>
        <icon class="iconfont iconjiantou"></icon>
      </view>
      <view class="meListItem">
        <view>
          <image src='../image/meFxm.png'>
          <text>我的分享码</text>
        </view>
        <view class="erWeiMa">
          <text>123465</text>
          <text class="number">复制</text>
        </view>
      </view>
    </view>
    <nav @childFn.user="goPage" @childFnOrReturn.user="goModifyUserInfo" />
  </view>
</template>

<script>
  import wepy from 'wepy'
  import nav from '../components/nav' // 底部导航
  export default class Me extends wepy.page {
    config = {
      navigationBarTitleText: '普京婚庆'
    }
    components = {
      nav: nav
    }

    mixins = []

    data = {
      userInfo: {}
    }

    computed = {

    }

    methods = {
      // 底部导航跳转
      // 底部导航跳转
      goPage (url, evt) {
        // if (this.verificationUserInfo()) {
        //   return 
        // }
        // 销毁当前页{跳转}
        this.$redirect(url)
      },
      // 页面中部导航点击事件
      pageNavClick(e) {
        let id = e.currentTarget.dataset.id
      },
      // 弹框显示
      newItem() {
        if (this.maskShow) {
          this.maskShow = false
        } else {
          this.maskShow = true
        }
        this.$apply()
      },
      //设置中心
      setting(e){
        let url = `/pages/meSetting`
        this.$navigate(url)
        this.$apply()
      },
       //余额中心
      meBalance(e){
        let url = `/pages/meBalance`
        this.$navigate(url)
        this.$apply()
      },
       //分销返佣
      meCashBack(e){
        let url = `/pages/meCashBack`
        this.$navigate(url)
        this.$apply()
      },
       //我的下级
      meSubordinate(e){
        let url = `/pages/meSubordinate`
        this.$navigate(url)
        this.$apply()
      },
      //订单调转
      meXy(e){

        let url = `/pages/orderList`
        this.$navigate(url)
        this.$apply()
      }
    }

    events = {

    }

    onLoad() {
      console.log(this.$parent.globalData.userInfo)
      this.userInfo = this.$parent.globalData.userInfo
      this.$apply()
    }
    

    // 用户信息校验
    verificationUserInfo() {
      if (!this.userInfo.hasOwnProperty('id')) {
        wx.showToast({
          title: "用户信息加载中...",
          icon: 'none',
        });
        return true
      }
    }
  }
</script>
<style lang="less">
.meBj{
    width: 750rpx;
    height: 270rpx;
    position: absolute;
    z-index: -1;
}
.header{
    display: flex;
    justify-content: space-around;
    padding:70rpx 30rpx;
    margin: 0 auto;
    .headLift{
        height: auto;
        display: flex;
        justify-content: flex-start;
        align-items: center;
        image{
            width: 124rpx;
            height: 124rpx;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 30rpx;
        }
        .name{
            color: #fff;
            font-weight: 400;
            font-size: 36rpx;
            margin-right: 16rpx;
        }
        .userId{
            color: #fff;
            font-size: 26rpx;
        }
        .fontInfo{
            color: #fff;
            font-size: 26rpx;
        }
    }
    .seting{
        width: 48rpx;
        height: 48rpx;
    }
}
.mony{
    display: flex;
    justify-content:space-around;
    flex-wrap: wrap;
    margin: 50rpx 0 0;
    text{
        display: block;
        text-align: center;
        font-size: 28rpx;
        color: #494949;
    }
    .monyText{
        font-size: 34rpx;
        color: #1f1f1f;
        font-weight: 600;
        margin-bottom: 8rpx;
    }
}
.iconfont{
    display: flex;
    align-items: center;
    justify-content: center;
    color: #999999;
    font-size: 48rpx;
}
.meOrder{
    display: flex;
    justify-content: space-between;
    align-content: center;
    width: 690rpx;
    padding: 0 30rpx;
    height: 83rpx;
    line-height: 83rpx;
    border-bottom: 1rpx solid #D8D8D8;
    .meOrderTitle{
        font-size: 30rpx;
        color: #1f1f1f;
        font-weight: 800;
    }
    .meOrderMore{
      display: flex;
      justify-content: space-between;
      align-content: center;
        font-size: 24rpx;
        color: #999;
        icon{
            width: 20rpx;
            width: 20rpx;
            font-size: 20rpx;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #BFBFBF;
            margin-left: 5rpx;
        }
    }
}
.meOrderItem{
    width: 240rpx;
    text-align: center;
    margin-bottom: 26rpx;
    image{
        width: 48rpx;
        height: 48rpx;
    }
    text{
        font-size: 24rpx;
        color: #494949;
    }
}
.meList{
    width: 690rpx;
    padding: 0 30rpx;
    .meListItem{
        display: flex;
        justify-content: space-between;
        align-content: center;
        margin: 50rpx 0;
        image{
            width: 32rpx;
            height: 32rpx;
            margin-right: 30rpx;
        }
        text{
            font-size: 32rpx;
            color: #494949;
        }
        icon{
            width: 20rpx;
            width: 20rpx;
            font-size: 20rpx;
            display: flex;
            align-items: center;
            justify-content: center;
            color:#BFBFBF;
        }
    }
    .erWeiMa{
        display: flex;
        text{
            font-size: 28rpx;
            color: #494949;
            margin-right: 10rpx;
        }
        .number{
            width: 58rpx;
            height: 34rpx;
            line-height: 34rpx;
            text-align: center;
            border-radius: 4rpx;
            font-size: 22rpx;
            color: #fff;
            background: #F42652;
            display: block;
        }
    }
}
</style>